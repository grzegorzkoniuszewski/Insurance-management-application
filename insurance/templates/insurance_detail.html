{% extends 'base.html' %}

{% block content %}
<div class="container">
    <h1>Insurance Policy Details</h1>
    <p><strong>Policy Number:</strong> {{ object.policy_number }}</p>
    <p><strong>Validity Start Date:</strong> {{ object.validity_start_date }}</p>
    <p><strong>Validity End Date:</strong> {{ object.validity_end_date }}</p>
    <p><strong>Status:</strong> {{ object.status }}</p>
    <p><strong>Type:</strong> {{ object.policy_type }}</p>

    <h2>Insurance Company Details</h2>
    <p><strong>Name:</strong> {{ object.tuBase.full_name }}</p>
    <p><strong>Address:</strong> {{ object.tuBase.address_street }}, {{ object.tuBase.address_building_number }}, {{ object.tuBase.address_postal_code }}, {{ object.tuBase.location }}</p>
    <p><strong>Phone:</strong> {{ object.tuBase.phone }}</p>
    <p><strong>Email:</strong> {{ object.tuBase.email }}</p>
</div>

<!-- Add edit and return buttons -->
<a class="btn btn-primary" href="{% url 'insurance_edit' pk=object.pk %}">Edit Insurance</a>
<a class="btn btn-primary" href="{% url 'insurance_list' %}">Back to All Insurances</a>
{% endblock %}


{#<button id="deleteBtn">Usuń Polisę</button> <!-- Przycisk usuwania -->#}
{##}
{#<!-- Modal -->#}
{#<div id="deleteModal" class="modal">#}
{#  <div class="modal-content" style="width: 60%; max-width: 100px; margin: auto; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);">#}
{#    <span class="close">&times;</span>#}
{#    <p style="text-align: center;">Czy na pewno chcesz usunąć tą polisę?</p>#}
{#    <div style="text-align: center;">#}
{#      <button id="confirmDeleteBtn">Tak</button>#}
{#      <button id="cancelDeleteBtn">Nie</button>#}
{#    </div>#}
{#  </div>#}
{#</div>#}
{##}
{#<script>#}
{#// Get the modal#}
{#var modal = document.getElementById('deleteModal');#}
{##}
{#// Get the button that opens the modal#}
{#var btn = document.getElementById("deleteBtn");#}
{##}
{#// Get the <span> element that closes the modal#}
{#var span = document.getElementsByClassName("close")[0];#}
{##}
{#// When the user clicks on the button, open the modal#}
{#btn.onclick = function() {#}
{#  modal.style.display = "block";#}
{#}#}
{##}
{#// When the user clicks on <span> (x), close the modal#}
{#span.onclick = function() {#}
{#  modal.style.display = "none";#}
{#}#}
{##}
{#// When the user clicks anywhere outside of the modal, close it#}
{#window.onclick = function(event) {#}
{#  if (event.target == modal) {#}
{#    modal.style.display = "none";#}
{#  }#}
{#}#}
{##}
{#// Handle confirmation delete button click#}
{#document.getElementById("confirmDeleteBtn").onclick = function() {#}
{#  modal.style.display = "none";#}
{#  // AJAX request to delete the policy#}
{#  var xhr = new XMLHttpRequest();#}
{#  xhr.open("POST", "{% url 'insurance_delete' policy_id=policy.id %}", true);#}
{#  xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');#}
{#  xhr.setRequestHeader('X-CSRFToken', '{{ csrf_token }}');#}
{#  xhr.onload = function () {#}
{#    if (xhr.status === 200) {#}
{#      // Redirect to the insurance list page after deleting the policy#}
{#      window.location.href = "{% url 'insurance_list' %}";#}
{#    }#}
{#  };#}
{#  xhr.send('confirm_delete=Yes'); // Pass confirm_delete parameter#}
{#}#}
{##}
{#// Handle cancel delete button click#}
{#document.getElementById("cancelDeleteBtn").onclick = function() {#}
{#  modal.style.display = "none";#}
{#}#}
{#</script>#}
{#{% endblock %}#}
